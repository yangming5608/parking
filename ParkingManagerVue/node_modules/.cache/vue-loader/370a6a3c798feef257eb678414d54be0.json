{"remainingRequest":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\IdeaProjects\\parking\\ParkingManagerVue\\src\\components\\car\\CarInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\src\\components\\car\\CarInfo.vue","mtime":1696068116093},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720454233480},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1720454234267},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720454233480},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1720454234585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgICAgICBxdWVyeUluZm86IHsNCiAgICAgICAgICAgICAgICBjYXJBcmVhOiAiIiwNCiAgICAgICAgICAgICAgICBjYXJUeXBlOiAiIiwNCiAgICAgICAgICAgICAgICBjYXJTdGF0ZTogIiIsDQogICAgICAgICAgICAgICAgcGFnZW51bTogMSwNCiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogNSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjYXJzOiBbXSwNCiAgICAgICAgICAgIHVpZDogdW5kZWZpbmVkLA0KICAgICAgICAgICAgY2FyVHlwZXM6IFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogIuWFqOmDqCIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAi5Li05pe26L2m5L2NIiwNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICLkuLTml7bovabkvY0iLA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIuWbuuWumui9puS9jSIsDQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAi5Zu65a6a6L2m5L2NIiwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGNhclN0YXRlczogWw0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGwsDQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAi5YWo6YOoIiwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICLlt7LlgZzovaYiLA0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogIuW3suWBnOi9piIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAi56m66Zey5LitIiwNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICLnqbrpl7LkuK0iLA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBnZXRMaXN0KCkgew0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAucG9zdCgiL2FwaS9zdGFsbC9nZXRTdGFsbExpc3QiLCB0aGlzLnF1ZXJ5SW5mbykNCiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXJzID0gcmVzLmRhdGEuZGF0YS5yZWNvcmRzOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKG5ld1NpemUpIHsNCiAgICAgICAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VTaXplID0gbmV3U2l6ZTsNCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsNCiAgICAgICAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VudW0gPSBuZXdQYWdlOw0KICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHVzZVN0YWxsKHNpZCkgew0KICAgICAgICAgICAgY29uc3QgcmUgPSBhd2FpdCB0aGlzLiRjb25maXJtKA0KICAgICAgICAgICAgICAgICLmraTmk43kvZzlsIbpooTlrpror6XovabkvY0sIOaYr+WQpue7p+e7rT8iLA0KICAgICAgICAgICAgICAgICLmj5DnpLoiLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICkuY2F0Y2goKGVycikgPT4gZXJyKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlKQ0KICAgICAgICAgICAgaWYgKHJlICE9ICJjb25maXJtIikgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygi5bey5Y+W5raI6aKE5a6a77yBIik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgICAgIC5nZXQoDQogICAgICAgICAgICAgICAgICAgICAgICAiL2FwaS9zdGFsbC9vcmRlclN0YWxsP3VpZD0iICsgdGhpcy51aWQgKyAiJnNpZD0iICsgc2lkDQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumihOWumuaIkOWKn++8gSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLpooTlrprlpLHotKXvvIEiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmdldExpc3QoKTsNCiAgICAgICAgdGhpcy51aWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsNCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["CarInfo.vue"],"names":[],"mappings":";AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CarInfo.vue","sourceRoot":"src/components/car","sourcesContent":["<template>\r\n    <div>\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item\r\n                ><i\r\n                    class=\"iconfont icon-r-building\"\r\n                    style=\"margin: 5px; font-size: 22px\"\r\n                >\r\n                    预定停车位</i\r\n                ></el-breadcrumb-item\r\n            >\r\n        </el-breadcrumb>\r\n        <!-- 卡片视图区域 -->\r\n        <el-card>\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"4\">\r\n                    <el-input\r\n                        v-model=\"queryInfo.carArea\"\r\n                        placeholder=\"请选择停车区域\"\r\n                    >\r\n                    </el-input>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-select\r\n                        v-model=\"queryInfo.carType\"\r\n                        placeholder=\"请选择车位类型\"\r\n                    >\r\n                        <el-option\r\n                            v-for=\"item in carTypes\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\"\r\n                        ></el-option>\r\n                    </el-select>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-select\r\n                        v-model=\"queryInfo.carState\"\r\n                        placeholder=\"请选择车位状态\"\r\n                    >\r\n                        <el-option\r\n                            v-for=\"item in carStates\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\"\r\n                        ></el-option>\r\n                    </el-select>\r\n                </el-col>\r\n                <el-col :span=\"3\">\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        style=\"font-size: 18px\"\r\n                        @click=\"getList\"\r\n                    >\r\n                    \r\n                        <i class=\"iconfont icon-r-find\"  style=\"font-size: 22px;\"></i> \r\n                        搜索</el-button\r\n                    >\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <!-- 车位信息区域 -->\r\n            <el-table v-loading=\"loading\" :data=\"cars\" border stripe>\r\n                <el-table-column\r\n                    width=\"50\"\r\n                    label=\"序号\"\r\n                    align=\"center\"\r\n                    type=\"index\"\r\n                ></el-table-column>\r\n                <el-table-column label=\"车位号\" prop=\"stallNum\" align=\"center\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位区域\"\r\n                    prop=\"stallArea\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位类型\"\r\n                    prop=\"stallType\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位状态\"\r\n                    prop=\"stallState\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位收费\"\r\n                    prop=\"stallMoney\"\r\n                    align=\"center\"\r\n                >\r\n                    <template slot-scope=\"scope\">\r\n                        {{ scope.row.stallMoney }}元/时\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            v-if=\"!scope.row.userId\"\r\n                            @click=\"useStall(scope.row.sid)\"\r\n                            type=\"warning\"\r\n                            style=\"font-size: 18px\"\r\n                        >\r\n                           <i class=\"iconfont icon-r-yes\"  style=\"font-size: 22px;\"></i>  预定</el-button\r\n                        >\r\n                        <el-button\r\n                            v-else\r\n                            @click=\"useStall(scope.row.sid)\"\r\n                            type=\"info\"\r\n                            style=\"font-size: 18px\"\r\n                            disabled\r\n                        >\r\n                           <i class=\"iconfont icon-r-yes\"  style=\"font-size: 22px;\"></i>  预定</el-button\r\n                        >\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"queryInfo.pagenum\"\r\n                :page-sizes=\"[5, 10, 15, 20]\"\r\n                :page-size=\"queryInfo.pageSize\"\r\n                layout=\"total, sizes, prev, pager, next\"\r\n                :total=\"total\"\r\n            >\r\n            </el-pagination>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            total: 0,\r\n            loading: true,\r\n            queryInfo: {\r\n                carArea: \"\",\r\n                carType: \"\",\r\n                carState: \"\",\r\n                pagenum: 1,\r\n                pageSize: 5,\r\n            },\r\n            cars: [],\r\n            uid: undefined,\r\n            carTypes: [\r\n                {\r\n                    value: null,\r\n                    label: \"全部\",\r\n                },\r\n                {\r\n                    value: \"临时车位\",\r\n                    label: \"临时车位\",\r\n                },\r\n                {\r\n                    value: \"固定车位\",\r\n                    label: \"固定车位\",\r\n                },\r\n            ],\r\n            carStates: [\r\n                {\r\n                    value: null,\r\n                    label: \"全部\",\r\n                },\r\n                {\r\n                    value: \"已停车\",\r\n                    label: \"已停车\",\r\n                },\r\n                {\r\n                    value: \"空闲中\",\r\n                    label: \"空闲中\",\r\n                },\r\n            ],\r\n        };\r\n    },\r\n    methods: {\r\n        getList() {\r\n            axios\r\n                .post(\"/api/stall/getStallList\", this.queryInfo)\r\n                .then((res) => {\r\n                    this.loading = false;\r\n                    this.total = res.data.data.total;\r\n                    this.cars = res.data.data.records;\r\n                });\r\n        },\r\n        handleSizeChange(newSize) {\r\n            this.queryInfo.pageSize = newSize;\r\n            this.getList();\r\n        },\r\n        handleCurrentChange(newPage) {\r\n            this.queryInfo.pagenum = newPage;\r\n            this.getList();\r\n        },\r\n        async useStall(sid) {\r\n            const re = await this.$confirm(\r\n                \"此操作将预定该车位, 是否继续?\",\r\n                \"提示\",\r\n                {\r\n                    confirmButtonText: \"确定\",\r\n                    cancelButtonText: \"取消\",\r\n                    type: \"warning\",\r\n                }\r\n            ).catch((err) => err);\r\n            // console.log(re)\r\n            if (re != \"confirm\") {\r\n                this.$message.info(\"已取消预定！\");\r\n            } else {\r\n                axios\r\n                    .get(\r\n                        \"/api/stall/orderStall?uid=\" + this.uid + \"&sid=\" + sid\r\n                    )\r\n                    .then((res) => {\r\n                        if (res.data.data) {\r\n                            this.$message.success(\"预定成功！\");\r\n                            this.getList();\r\n                        } else {\r\n                            this.$message.error(\"预定失败！\");\r\n                        }\r\n                    });\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getList();\r\n        this.uid = window.sessionStorage.getItem(\"token\");\r\n    },\r\n};\r\n</script>"]}]}