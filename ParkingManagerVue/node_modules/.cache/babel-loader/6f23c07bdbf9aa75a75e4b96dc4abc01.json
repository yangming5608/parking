{"remainingRequest":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\babel-loader\\lib\\index.js!F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\IdeaProjects\\parking\\ParkingManagerVue\\src\\components\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\src\\components\\Login.vue","mtime":1696068494771},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\babel.config.js","mtime":1616250210485},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720454233480},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1720454234267},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720454233480},{"path":"F:\\IdeaProjects\\parking\\ParkingManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1720454234585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICB2YXIgY2hlY2tVc2VybmFtZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIueUqOaIt+WQjeS4jeiDveS4uuepuiIpKTsKICAgICAgfQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBheGlvcy5nZXQoIi9hcGkvdXNlci9jaGVja1VzZXJuYW1lP3VzZXJuYW1lPSIgKyB2YWx1ZSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKCFyZXMuZGF0YS5kYXRhKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi55So5oi35ZCN5bey5a2Y5ZyoIikpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwgMTApOwogICAgfTsKICAgIHZhciBjaGVja0FnZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuW5tOm+hOS4jeiDveS4uuepuiIpKTsKICAgICAgfQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeaVsOWtl+WAvCIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHZhbHVlIDwgMTgpIHsKICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLlv4XpobvlubTmu6ExOOWygSIpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCAxMDAwKTsKICAgIH07CiAgICB2YXIgdmFsaWRhdGVQYXNzMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+35YaN5qyh6L6T5YWl5a+G56CBIikpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLnJlZ2lzdGVyVXNlci5wYXNzd29yZCkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0ISIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgcmVnaXN0ZXJTaG93OiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogMywKICAgICAgICAgIG1heDogMTAsCiAgICAgICAgICBtZXNzYWdlOiAi6ZW/5bqm5ZyoIDMg5YiwIDEwIOS4quWtl+espiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDYsCiAgICAgICAgICBtYXg6IDE1LAogICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCA2IOWIsCAxNSDkuKrlrZfnrKYiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgcmVnaXN0ZXJVc2VyOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICBjaGVjazogIiIsCiAgICAgICAgc2V4OiAi55S3IiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgYWdlOiAiIiwKICAgICAgICBjYXJkOiAiIiwKICAgICAgICBuaWtlOiAiIgogICAgICB9LAogICAgICByZWdpc3RlclJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrVXNlcm5hbWUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDYsCiAgICAgICAgICBtYXg6IDE1LAogICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCA2IOWIsCAxNSDkuKrlrZfnrKYiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY2hlY2s6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBhZ2U6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrQWdlLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXogZTns7vnlLXor50iLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY2FyZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpei9pueJjOWPtyIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBuaWtlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5aeT5ZCNIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2dpbigpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgYXhpb3MucG9zdCgiL2FwaS91c2VyL2xvZ2luIiwgdGhpcy5ydWxlRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuZGF0YS5kYXRhLnN0YXRlKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIueZu+mZhuaIkOWKn++8gSIpOwogICAgICAgICAgLy8gIHRva2Vu5Y+q5bqU5Zyo5b2T5YmN572R56uZ5omT5byA5pyf6Ze055Sf5pWI77yM5omA5Lul5bCGdG9rZW7kv53lrZjlnKhzZXNzaW9uU3RvcmFnZeS4rQogICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLmRhdGEuZGF0YS51aWQpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEucm9sZSA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWFuZSIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9jb25tZW4iKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi55m75b2V5aSx6LSlLCIgKyByZXMuZGF0YS5kYXRhLm1zZyArICIhIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICBpZiAoZS5yZXNwb25zZSA9PSB1bmRlZmluZWQgfHwgZS5yZXNwb25zZS5kYXRhID09IHVuZGVmaW5lZCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogZSwKICAgICAgICAgICAgZHVyYXRpb246IDUwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiBlLnJlc3BvbnNlLmRhdGEsCiAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHRvUmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMucmVnaXN0ZXJTaG93ID0gdHJ1ZTsKICAgIH0sCiAgICB0b0xvZ2luKCkgewogICAgICB0aGlzLnJlZ2lzdGVyU2hvdyA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5ydWxlcy5yZXNldEZpZWxkcygpOwogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICBheGlvcy5wb3N0KCIvYXBpL3VzZXIvcmVnaXN0ZXIiLCB0aGlzLnJlZ2lzdGVyVXNlcikudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEpIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuazqOWGjOaIkOWKn++8gSIpOwogICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTaG93ID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi55m75b2V5aSx6LSlLOivt+mHjeaWsOWwneivle+8gSIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["axios","data","checkUsername","rule","value","callback","Error","setTimeout","get","then","res","checkAge","Number","isInteger","validatePass2","registerUser","password","registerShow","loading","ruleForm","username","rules","required","message","trigger","min","max","check","sex","phone","age","card","nike","registerRules","validator","methods","login","post","state","$message","success","window","sessionStorage","setItem","uid","role","$router","push","error","msg","catch","e","console","log","response","undefined","showClose","duration","toRegister","toLogin","$nextTick","$refs","resetFields","submitForm","formName","validate","valid","resetForm"],"sources":["src/components/Login.vue"],"sourcesContent":["<template>\r\n    <div\r\n        class=\"login_bg\"\r\n        v-loading=\"loading\"\r\n        element-loading-text=\"正在登录中,请稍等！\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n        element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n    >\r\n        <div class=\"login_box\" v-if=\"!registerShow\">\r\n            <div class=\"login-title\">\r\n                <i style=\"font-size: 1.6vw\">登录停车场管理系统</i>\r\n            </div>\r\n            <br />\r\n            <el-form\r\n                class=\"login_form\"\r\n                :model=\"ruleForm\"\r\n                :rules=\"rules\"\r\n                ref=\"rules\"\r\n                label-width=\"0\"\r\n            >\r\n                <el-form-item prop=\"username\">\r\n                    <el-input\r\n                        v-model=\"ruleForm.username\"\r\n                        placeholder=\"请输入用户名\"\r\n                    >\r\n                        <i slot=\"prefix\" class=\"iconfont icon-r-user1\"  style=\"font-size: 24px;\"></i>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"password\">\r\n                    <el-input\r\n                        type=\"password\"\r\n                        v-model=\"ruleForm.password\"\r\n                        placeholder=\"请输入密码\"\r\n                    >\r\n                        <i slot=\"prefix\" class=\"iconfont icon-r-lock\"  style=\"font-size: 24px;\"></i>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-button\r\n                    type=\"primary\"\r\n                    @click=\"login\"\r\n                    style=\"width: 100%; font-size: 18px\"\r\n                >\r\n                <i class=\"iconfont icon-r-yes\" style=\"font-size: 20px;\"></i>\r\n                     登录</el-button\r\n                ><br /><br />\r\n                <el-button\r\n                    type=\"success\"\r\n                    @click=\"toRegister\"\r\n                    style=\"width: 100%; font-size: 18px\"\r\n                >\r\n                <i class=\"iconfont icon-r-add\" style=\"font-size: 20px;\"></i>\r\n\r\n                     注册</el-button\r\n                >\r\n            </el-form>\r\n        </div>\r\n        <div class=\"register-box\" v-if=\"registerShow\">\r\n            <h2>用户注册</h2>\r\n            <el-form\r\n                :model=\"registerUser\"\r\n                status-icon\r\n                :rules=\"registerRules\"\r\n                ref=\"registerRules\"\r\n                label-width=\"100px\"\r\n                class=\"demo-ruleForm\"\r\n            >\r\n                <el-form-item label=\"用户名\" prop=\"username\">\r\n                    <el-input\r\n                        v-model=\"registerUser.username\"\r\n                        placeholder=\"请输入用户名\"\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码\" prop=\"password\">\r\n                    <el-input\r\n                        v-model=\"registerUser.password\"\r\n                        placeholder=\"请输入密码\"\r\n                        show-password\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"确认密码\" prop=\"check\" class=\"is-required\">\r\n                    <el-input\r\n                        v-model=\"registerUser.check\"\r\n                        placeholder=\"确认密码\"\r\n                        show-password\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"姓名\" prop=\"nike\">\r\n                    <el-input\r\n                        v-model=\"registerUser.nike\"\r\n                        placeholder=\"请输入姓名\"\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别\" prop=\"sex\" required>\r\n                    <el-radio v-model=\"registerUser.sex\" label=\"男\"\r\n                        >男</el-radio\r\n                    >\r\n                    <el-radio v-model=\"registerUser.sex\" label=\"女\"\r\n                        >女</el-radio\r\n                    >\r\n                </el-form-item>\r\n                <el-form-item label=\"年龄\" prop=\"age\" class=\"is-required\">\r\n                    <el-input\r\n                        v-model.number=\"registerUser.age\"\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"车牌号\" prop=\"card\" class=\"is-required\">\r\n                    <el-input\r\n                        v-model=\"registerUser.card\"\r\n                        placeholder=\"请输入车牌号\"\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"联系电话\" prop=\"phone\" required>\r\n                    <el-input\r\n                        v-model=\"registerUser.phone\"\r\n                        placeholder=\"请输入联系电话\"\r\n                        style=\"width: 300px\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button\r\n                        class=\"register-btn\"\r\n                        type=\"success\" style=\"font-size: 22px;\"\r\n                        @click=\"submitForm('registerRules')\"\r\n                    ><i class=\"iconfont icon-r-add\" style=\"font-size: 24px;\"></i>\r\n                         注册</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        class=\"to-login\" style=\"font-size: 22px;\"\r\n                        @click=\"toLogin\"\r\n                    >\r\n                    <i class=\"iconfont icon-r-left\" style=\"font-size: 24px;\"></i>\r\n                         返回登录</el-button\r\n                    >\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    data() {\r\n        var checkUsername = (rule, value, callback) => {\r\n            if (!value) {\r\n                return callback(new Error(\"用户名不能为空\"));\r\n            }\r\n            setTimeout(() => {\r\n                axios\r\n                    .get(\"/api/user/checkUsername?username=\" + value)\r\n                    .then((res) => {\r\n                        if (!res.data.data) {\r\n                            callback(new Error(\"用户名已存在\"));\r\n                        } else {\r\n                            callback();\r\n                        }\r\n                    });\r\n            }, 10);\r\n        };\r\n        var checkAge = (rule, value, callback) => {\r\n            if (!value) {\r\n                return callback(new Error(\"年龄不能为空\"));\r\n            }\r\n            setTimeout(() => {\r\n                if (!Number.isInteger(value)) {\r\n                    callback(new Error(\"请输入数字值\"));\r\n                } else {\r\n                    if (value < 18) {\r\n                        callback(new Error(\"必须年满18岁\"));\r\n                    } else {\r\n                        callback();\r\n                    }\r\n                }\r\n            }, 1000);\r\n        };\r\n        var validatePass2 = (rule, value, callback) => {\r\n            if (value === \"\") {\r\n                callback(new Error(\"请再次输入密码\"));\r\n            } else if (value !== this.registerUser.password) {\r\n                callback(new Error(\"两次输入密码不一致!\"));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            registerShow: false,\r\n            loading: false,\r\n            ruleForm: {\r\n                username: \"\",\r\n                password: \"\",\r\n            },\r\n            rules: {\r\n                username: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入用户名\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                    {\r\n                        min: 3,\r\n                        max: 10,\r\n                        message: \"长度在 3 到 10 个字符\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                password: [\r\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n                    {\r\n                        min: 6,\r\n                        max: 15,\r\n                        message: \"长度在 6 到 15 个字符\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n            },\r\n            registerUser: {\r\n                username: \"\",\r\n                password: \"\",\r\n                check: \"\",\r\n                sex: \"男\",\r\n                phone: \"\",\r\n                age: \"\",\r\n                card: \"\",\r\n                nike: \"\",\r\n            },\r\n            registerRules: {\r\n                username: [{ validator: checkUsername, trigger: \"blur\" }],\r\n                password: [\r\n                    { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n                    {\r\n                        min: 6,\r\n                        max: 15,\r\n                        message: \"长度在 6 到 15 个字符\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                check: [{ validator: validatePass2, trigger: \"blur\" }],\r\n                age: [{ validator: checkAge, trigger: \"blur\" }],\r\n                phone: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入联系电话\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                card: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入车牌号\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n                nike: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入姓名\",\r\n                        trigger: \"blur\",\r\n                    },\r\n                ],\r\n            },\r\n        };\r\n    },\r\n    methods: {\r\n        login() {\r\n            this.loading = true;\r\n            axios\r\n                .post(\"/api/user/login\", this.ruleForm)\r\n                .then((res) => {\r\n                    this.loading = false;\r\n                    if (res.data.data.state) {\r\n                        this.$message.success(\"登陆成功！\");\r\n                        //  token只应在当前网站打开期间生效，所以将token保存在sessionStorage中\r\n                        window.sessionStorage.setItem(\r\n                            \"token\",\r\n                            res.data.data.uid\r\n                        );\r\n                        if (res.data.data.role == 0) {\r\n                            this.$router.push(\"/mane\");\r\n                        } else {\r\n                            this.$router.push(\"/conmen\");\r\n                        }\r\n                    } else {\r\n                        this.$message.error(\r\n                            \"登录失败,\" + res.data.data.msg + \"!\"\r\n                        );\r\n                    }\r\n                })\r\n                .catch((e) => {\r\n                    this.loading = false;\r\n\r\n                    console.log(e);\r\n                    if (\r\n                        e.response == undefined ||\r\n                        e.response.data == undefined\r\n                    ) {\r\n                        this.$message.error({\r\n                            showClose: true,\r\n                            message: e,\r\n                            duration: 5000,\r\n                        });\r\n                    } else {\r\n                        this.$message.error({\r\n                            showClose: true,\r\n                            message: e.response.data,\r\n                            duration: 5000,\r\n                        });\r\n                    }\r\n                });\r\n        },\r\n        toRegister() {\r\n            this.registerShow = true;\r\n        },\r\n        toLogin() {\r\n            this.registerShow = false;\r\n            this.$nextTick(() => {\r\n                this.$refs.rules.resetFields();\r\n            });\r\n        },\r\n        submitForm(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    this.loading = true;\r\n                    axios\r\n                        .post(\"/api/user/register\", this.registerUser)\r\n                        .then((res) => {\r\n                            this.loading = false;\r\n                            if (res.data.data) {\r\n                                this.$message.success(\"注册成功！\");\r\n                                this.registerShow = false;\r\n                            } else {\r\n                                this.$message.error(\"登录失败,请重新尝试！\");\r\n                            }\r\n                        });\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        resetForm(formName) {\r\n            this.$refs[formName].resetFields();\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.login_bg {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    overflow-y: auto;\r\n    height: 100%;\r\n    background: url(\"../../public/img/bg1.jpg\") center top / cover no-repeat;\r\n}\r\n.register {\r\n    color: rgb(172, 169, 169);\r\n    cursor: pointer;\r\n}\r\n.register:hover {\r\n    color: red;\r\n}\r\n.register-box {\r\n    background: #fff;\r\n    border-radius: 10px;\r\n    height: 650px;\r\n    margin: 30px 20% 30px 20%;\r\n    padding: 25px 15% 25px 15%;\r\n}\r\n.register-box h2 {\r\n    text-align: center;\r\n}\r\n\r\n.login_box {\r\n    background-color: rgb(248, 246, 246);\r\n    padding: 25px 50px 50px 50px;\r\n    border-radius: 10px;\r\n    // margin-top: 10%;\r\n    margin: 10% 38% 0 38%;\r\n    opacity: 0.95;\r\n}\r\n.login-title h2 {\r\n    text-align: center;\r\n}\r\n.to-login {\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]}]}