{"remainingRequest":"F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\babel-loader\\lib\\index.js!F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\IdeaProjects\\ParkingManagerVue\\src\\components\\car\\CarInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\IdeaProjects\\ParkingManagerVue\\src\\components\\car\\CarInfo.vue","mtime":1696068116093},{"path":"F:\\IdeaProjects\\ParkingManagerVue\\babel.config.js","mtime":1616250210485},{"path":"F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720454233480},{"path":"F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1720454234267},{"path":"F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720454233480},{"path":"F:\\IdeaProjects\\ParkingManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1720454234585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b3RhbDogMCwKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgY2FyQXJlYTogIiIsCiAgICAgICAgY2FyVHlwZTogIiIsCiAgICAgICAgY2FyU3RhdGU6ICIiLAogICAgICAgIHBhZ2VudW06IDEsCiAgICAgICAgcGFnZVNpemU6IDUKICAgICAgfSwKICAgICAgY2FyczogW10sCiAgICAgIHVpZDogdW5kZWZpbmVkLAogICAgICBjYXJUeXBlczogW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICBsYWJlbDogIuWFqOmDqCIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAi5Li05pe26L2m5L2NIiwKICAgICAgICBsYWJlbDogIuS4tOaXtui9puS9jSIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAi5Zu65a6a6L2m5L2NIiwKICAgICAgICBsYWJlbDogIuWbuuWumui9puS9jSIKICAgICAgfV0sCiAgICAgIGNhclN0YXRlczogW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICBsYWJlbDogIuWFqOmDqCIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAi5bey5YGc6L2mIiwKICAgICAgICBsYWJlbDogIuW3suWBnOi9piIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAi56m66Zey5LitIiwKICAgICAgICBsYWJlbDogIuepuumXsuS4rSIKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMaXN0KCkgewogICAgICBheGlvcy5wb3N0KCIvYXBpL3N0YWxsL2dldFN0YWxsTGlzdCIsIHRoaXMucXVlcnlJbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWw7CiAgICAgICAgdGhpcy5jYXJzID0gcmVzLmRhdGEuZGF0YS5yZWNvcmRzOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKG5ld1NpemUpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZVNpemUgPSBuZXdTaXplOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZW51bSA9IG5ld1BhZ2U7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIGFzeW5jIHVzZVN0YWxsKHNpZCkgewogICAgICBjb25zdCByZSA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhumihOWumuivpei9puS9jSwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS5jYXRjaChlcnIgPT4gZXJyKTsKICAgICAgLy8gY29uc29sZS5sb2cocmUpCiAgICAgIGlmIChyZSAhPSAiY29uZmlybSIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oIuW3suWPlua2iOmihOWumu+8gSIpOwogICAgICB9IGVsc2UgewogICAgICAgIGF4aW9zLmdldCgiL2FwaS9zdGFsbC9vcmRlclN0YWxsP3VpZD0iICsgdGhpcy51aWQgKyAiJnNpZD0iICsgc2lkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuZGF0YSkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumihOWumuaIkOWKn++8gSIpOwogICAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIumihOWumuWksei0pe+8gSIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLnVpZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogIH0KfTs="},{"version":3,"names":["axios","data","total","loading","queryInfo","carArea","carType","carState","pagenum","pageSize","cars","uid","undefined","carTypes","value","label","carStates","methods","getList","post","then","res","records","handleSizeChange","newSize","handleCurrentChange","newPage","useStall","sid","re","$confirm","confirmButtonText","cancelButtonText","type","catch","err","$message","info","get","success","error","mounted","window","sessionStorage","getItem"],"sources":["src/components/car/CarInfo.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item\r\n                ><i\r\n                    class=\"iconfont icon-r-building\"\r\n                    style=\"margin: 5px; font-size: 22px\"\r\n                >\r\n                    预定停车位</i\r\n                ></el-breadcrumb-item\r\n            >\r\n        </el-breadcrumb>\r\n        <!-- 卡片视图区域 -->\r\n        <el-card>\r\n            <el-row :gutter=\"20\">\r\n                <el-col :span=\"4\">\r\n                    <el-input\r\n                        v-model=\"queryInfo.carArea\"\r\n                        placeholder=\"请选择停车区域\"\r\n                    >\r\n                    </el-input>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-select\r\n                        v-model=\"queryInfo.carType\"\r\n                        placeholder=\"请选择车位类型\"\r\n                    >\r\n                        <el-option\r\n                            v-for=\"item in carTypes\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\"\r\n                        ></el-option>\r\n                    </el-select>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-select\r\n                        v-model=\"queryInfo.carState\"\r\n                        placeholder=\"请选择车位状态\"\r\n                    >\r\n                        <el-option\r\n                            v-for=\"item in carStates\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\"\r\n                        ></el-option>\r\n                    </el-select>\r\n                </el-col>\r\n                <el-col :span=\"3\">\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        style=\"font-size: 18px\"\r\n                        @click=\"getList\"\r\n                    >\r\n                    \r\n                        <i class=\"iconfont icon-r-find\"  style=\"font-size: 22px;\"></i> \r\n                        搜索</el-button\r\n                    >\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <!-- 车位信息区域 -->\r\n            <el-table v-loading=\"loading\" :data=\"cars\" border stripe>\r\n                <el-table-column\r\n                    width=\"50\"\r\n                    label=\"序号\"\r\n                    align=\"center\"\r\n                    type=\"index\"\r\n                ></el-table-column>\r\n                <el-table-column label=\"车位号\" prop=\"stallNum\" align=\"center\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位区域\"\r\n                    prop=\"stallArea\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位类型\"\r\n                    prop=\"stallType\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位状态\"\r\n                    prop=\"stallState\"\r\n                    align=\"center\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"车位收费\"\r\n                    prop=\"stallMoney\"\r\n                    align=\"center\"\r\n                >\r\n                    <template slot-scope=\"scope\">\r\n                        {{ scope.row.stallMoney }}元/时\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            v-if=\"!scope.row.userId\"\r\n                            @click=\"useStall(scope.row.sid)\"\r\n                            type=\"warning\"\r\n                            style=\"font-size: 18px\"\r\n                        >\r\n                           <i class=\"iconfont icon-r-yes\"  style=\"font-size: 22px;\"></i>  预定</el-button\r\n                        >\r\n                        <el-button\r\n                            v-else\r\n                            @click=\"useStall(scope.row.sid)\"\r\n                            type=\"info\"\r\n                            style=\"font-size: 18px\"\r\n                            disabled\r\n                        >\r\n                           <i class=\"iconfont icon-r-yes\"  style=\"font-size: 22px;\"></i>  预定</el-button\r\n                        >\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"queryInfo.pagenum\"\r\n                :page-sizes=\"[5, 10, 15, 20]\"\r\n                :page-size=\"queryInfo.pageSize\"\r\n                layout=\"total, sizes, prev, pager, next\"\r\n                :total=\"total\"\r\n            >\r\n            </el-pagination>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            total: 0,\r\n            loading: true,\r\n            queryInfo: {\r\n                carArea: \"\",\r\n                carType: \"\",\r\n                carState: \"\",\r\n                pagenum: 1,\r\n                pageSize: 5,\r\n            },\r\n            cars: [],\r\n            uid: undefined,\r\n            carTypes: [\r\n                {\r\n                    value: null,\r\n                    label: \"全部\",\r\n                },\r\n                {\r\n                    value: \"临时车位\",\r\n                    label: \"临时车位\",\r\n                },\r\n                {\r\n                    value: \"固定车位\",\r\n                    label: \"固定车位\",\r\n                },\r\n            ],\r\n            carStates: [\r\n                {\r\n                    value: null,\r\n                    label: \"全部\",\r\n                },\r\n                {\r\n                    value: \"已停车\",\r\n                    label: \"已停车\",\r\n                },\r\n                {\r\n                    value: \"空闲中\",\r\n                    label: \"空闲中\",\r\n                },\r\n            ],\r\n        };\r\n    },\r\n    methods: {\r\n        getList() {\r\n            axios\r\n                .post(\"/api/stall/getStallList\", this.queryInfo)\r\n                .then((res) => {\r\n                    this.loading = false;\r\n                    this.total = res.data.data.total;\r\n                    this.cars = res.data.data.records;\r\n                });\r\n        },\r\n        handleSizeChange(newSize) {\r\n            this.queryInfo.pageSize = newSize;\r\n            this.getList();\r\n        },\r\n        handleCurrentChange(newPage) {\r\n            this.queryInfo.pagenum = newPage;\r\n            this.getList();\r\n        },\r\n        async useStall(sid) {\r\n            const re = await this.$confirm(\r\n                \"此操作将预定该车位, 是否继续?\",\r\n                \"提示\",\r\n                {\r\n                    confirmButtonText: \"确定\",\r\n                    cancelButtonText: \"取消\",\r\n                    type: \"warning\",\r\n                }\r\n            ).catch((err) => err);\r\n            // console.log(re)\r\n            if (re != \"confirm\") {\r\n                this.$message.info(\"已取消预定！\");\r\n            } else {\r\n                axios\r\n                    .get(\r\n                        \"/api/stall/orderStall?uid=\" + this.uid + \"&sid=\" + sid\r\n                    )\r\n                    .then((res) => {\r\n                        if (res.data.data) {\r\n                            this.$message.success(\"预定成功！\");\r\n                            this.getList();\r\n                        } else {\r\n                            this.$message.error(\"预定失败！\");\r\n                        }\r\n                    });\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getList();\r\n        this.uid = window.sessionStorage.getItem(\"token\");\r\n    },\r\n};\r\n</script>"],"mappings":"AAuIA,OAAAA,KAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,OAAA;MACAC,SAAA;QACAC,OAAA;QACAC,OAAA;QACAC,QAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,IAAA;MACAC,GAAA,EAAAC,SAAA;MACAC,QAAA,GACA;QACAC,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,EACA;MACAC,SAAA,GACA;QACAF,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA;IAEA;EACA;EACAE,OAAA;IACAC,QAAA;MACAlB,KAAA,CACAmB,IAAA,iCAAAf,SAAA,EACAgB,IAAA,CAAAC,GAAA;QACA,KAAAlB,OAAA;QACA,KAAAD,KAAA,GAAAmB,GAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAC,KAAA;QACA,KAAAQ,IAAA,GAAAW,GAAA,CAAApB,IAAA,CAAAA,IAAA,CAAAqB,OAAA;MACA;IACA;IACAC,iBAAAC,OAAA;MACA,KAAApB,SAAA,CAAAK,QAAA,GAAAe,OAAA;MACA,KAAAN,OAAA;IACA;IACAO,oBAAAC,OAAA;MACA,KAAAtB,SAAA,CAAAI,OAAA,GAAAkB,OAAA;MACA,KAAAR,OAAA;IACA;IACA,MAAAS,SAAAC,GAAA;MACA,MAAAC,EAAA,cAAAC,QAAA,CACA,oBACA,MACA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,CACA,EAAAC,KAAA,CAAAC,GAAA,IAAAA,GAAA;MACA;MACA,IAAAN,EAAA;QACA,KAAAO,QAAA,CAAAC,IAAA;MACA;QACArC,KAAA,CACAsC,GAAA,CACA,oCAAA3B,GAAA,aAAAiB,GACA,EACAR,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAApB,IAAA,CAAAA,IAAA;YACA,KAAAmC,QAAA,CAAAG,OAAA;YACA,KAAArB,OAAA;UACA;YACA,KAAAkB,QAAA,CAAAI,KAAA;UACA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAvB,OAAA;IACA,KAAAP,GAAA,GAAA+B,MAAA,CAAAC,cAAA,CAAAC,OAAA;EACA;AACA","ignoreList":[]}]}